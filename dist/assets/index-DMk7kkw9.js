var Me=Object.defineProperty;var Ae=(s,t,n)=>t in s?Me(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var U=(s,t,n)=>Ae(s,typeof t!="symbol"?t+"":t,n);import{u as k,r as p,d,j as e,e as Le,b as Re,P as Fe}from"./react-vendor-BFY6CQII.js";import{h as f}from"./vendor-CVDYw_B1.js";import{r as ue,u as fe,s as Ie,t as Ce,v as Ge,w as Be,x as Y,i as De,y as Q,z as re,G as Oe,Q as Ne}from"./three-D0h9TnlV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();const B={0:{shape:[[0]],color:"rgba(0,0,0,0)"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"#00f0f0"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"#0000f0"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"#f0a000"},O:{shape:[["O","O"],["O","O"]],color:"#f0f000"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"#00f000"},T:{shape:[["T","T","T"],[0,"T",0],[0,0,0]],color:"#a000f0"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"#f00000"}};class _{constructor(t){U(this,"shape");U(this,"color");U(this,"position");U(this,"type");this.type=t,this.shape=B[t].shape,this.color=B[t].color,this.position={x:3,y:0}}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(o=>o[r]));this.shape=t.map(n=>n.reverse())}}const P=10,I=20,F=()=>Array(I).fill(null).map(()=>Array(P).fill(0));function z(s,t,n){for(let r=0;r<t.shape.length;r++)for(let o=0;o<t.shape[r].length;o++)if(t.shape[r][o]!==0){const c=n.x+o,i=n.y+r;if(c<0||c>=P||i>=I||i>=0&&s[i][c]!==0)return!1}return!0}const pe=(s,t)=>{},Pe=100,ze=10,J=()=>{const s=Object.keys(B).filter(n=>n!=="0"),t=s[Math.floor(Math.random()*s.length)];return new _(t)},H=f([F(),F(),F(),F()]),b=f(0),T=f(null),V=f(null),C=f(0),A=f(!1),ee=f("GAME OVER"),te=f([0,1,2,3]),X=f(!0),R=f(1),q=f(0),D=f(!1),Z=f(!1),N=f(!1),O=f(!1),se=f(null),K=f(!1);f(!1);const ae=f(!1),me=f(!1),ne=f(s=>{const t=s(H),n=s(b);return t[n]});f(s=>({grids:s(H),activeFace:s(b),currentBlock:s(T),nextBlock:s(V),score:s(C),isGameOver:s(A),myFaces:s(te),showGhost:s(X),level:s(R),linesCleared:s(q),isLocking:s(D),isFocusMode:s(Z),isWarning:s(N),collisionBlock:s(se)}));const He=f(null,(s,t,n)=>{s(N)||s(A)||(t(O,!0),t(se,n),t(N,!0),t(ee,"GAME OVER"),setTimeout(()=>{t(A,!0),t(N,!1),t(O,!1),t(T,null),pe("game_over",{score:s(C),level:s(R)})},800))}),ie=f(null,(s,t)=>{t(H,[F(),F(),F(),F()]),t(b,0),t(T,J()),t(V,J()),t(C,0),t(A,!1),t(K,!0),t(R,1),t(q,0),t(D,!1),t(N,!1),t(O,!1),t(se,null),t(ee,"GAME OVER")}),xe=f(null,(s,t,{dx:n,dy:r})=>{const o=s(T),c=s(A),i=s(O);if(c||i||!o)return;const a={x:o.position.x+n,y:o.position.y+r},l=new _(o.type);l.position=a,l.shape=o.shape;const m=s(ne);if(!z(m,o,o.position)){t(A,!0),t(ee,"GAME OVER"),t(T,null),pe("game_over",{score:s(C),level:s(R)});return}z(m,l,a)?(t(T,l),t(D,!1)):r===1&&t(D,!0)}),je=f(null,(s,t)=>{const n=s(T);if(s(A)||s(O)||!n)return;const r=new _(n.type);r.position=n.position,r.shape=[...n.shape],r.rotate(),z(s(ne),r,r.position)&&(t(T,r),t(D,!1))}),we=f(null,(s,t,n)=>{const r=s(T);if(s(A)||s(O)||!r)return;const o=s(te),c=s(b);let i=o.indexOf(c);n==="right"?i=(i+1)%o.length:i=(i-1+o.length)%o.length;const a=o[i];t(b,a)}),ge=f(null,(s,t)=>{const n=s(T);if(!n)return;const r=s(b),o=s(H),{x:c,y:i}=n.position,a=o[r].map(u=>[...u]);n.shape.forEach((u,x)=>{u.forEach((v,j)=>{if(v!==0){const S=c+j,E=i+x;E>=0&&E<I&&S>=0&&S<P&&(a[E][S]=n.type)}})});const l=[...o];l[r]=a;let m=0;for(let u=0;u<I;u++)if(l.every(x=>x[u].every(v=>v!==0))){m++;for(let x=0;x<l.length;x++)l[x].splice(u,1),l[x].unshift(Array(P).fill(0))}if(t(H,l),m>0){const u=s(q)+m;t(q,u),t(C,s(C)+m*Pe*m),t(R,Math.floor(u/ze)+1)}const y=s(V)??J();t(T,new _(y.type)),t(V,J()),t(D,!1);const g=s(T);z(s(ne),g,g.position)||t(He,g)}),ye=f(null,(s,t)=>{const n=s(T);if(s(A)||!n)return;const r=s(ne);let o=n.position.y;for(;z(r,n,{x:n.position.x,y:o+1});)o++;const c=new _(n.type);c.position={x:n.position.x,y:o},c.shape=n.shape,t(T,c),t(ge)}),ve=f(null,(s,t)=>{const n=!s(X);t(X,n)}),ke=f(null,(s,t)=>{t(Z,n=>!n)});f(null,(s,t,n)=>{t(te,n),n.includes(s(b))||t(b,n[0]||0)});const le=200,oe=30,_e=250,de=20,Ke=()=>{const s=k(xe),t=k(je),n=k(ye),r=k(me),o=p.useRef(null);return{handleTouchStart:a=>{if(a.preventDefault(),a.touches.length>1)return;const{clientX:l,clientY:m}=a.touches[0];o.current={startTime:Date.now(),startX:l,startY:m,longPressTimer:window.setTimeout(()=>{o.current&&(r(!0),o.current.longPressTimer=null)},le)}},handleTouchEnd:a=>{if(a.preventDefault(),!o.current||a.changedTouches.length>1)return;const{startTime:l,startX:m,startY:y,longPressTimer:g}=o.current;g&&clearTimeout(g),r(!1);const u={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY,time:Date.now()},x=u.x-m,v=u.y-y,j=u.time-l;if(j>=le){o.current=null;return}if(j<_e&&Math.abs(x)<de&&Math.abs(v)<de){t(),o.current=null;return}Math.abs(x)>Math.abs(v)?x>oe?s({dx:1,dy:0}):x<-oe&&s({dx:-1,dy:0}):v>oe&&n(),o.current=null}}},w=1,L=P*w,$=I*w,We=()=>{const[s,t]=p.useState(!0),n=d(ee);p.useEffect(()=>{const a=setInterval(()=>t(l=>!l),500);return()=>clearInterval(a)},[]);const r={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(10, 0, 0, 0.75)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#ff003c",fontFamily:"'Cutive Mono', 'Courier New', monospace",zIndex:100,textShadow:"0 0 5px #ff003c, 0 0 10px #ff003c, 0 0 20px #ff003c, 0 0 40px #ff003c",backdropFilter:"blur(3px)",border:"2px solid #ff003c",boxShadow:"inset 0 0 20px #ff003c, 0 0 20px #ff003c"},o={fontSize:"clamp(2rem, 10vw, 5rem)",marginBottom:"1rem",letterSpacing:"0.2rem",textAlign:"center",textTransform:"uppercase",animation:"flicker 1.5s infinite alternate"},c={fontSize:"clamp(1rem, 5vw, 1.5rem)",transition:"opacity 0.5s ease-in-out",opacity:s?1:.3,textTransform:"uppercase"};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
    @keyframes flicker {
      0%, 18%, 22%, 25%, 53%, 57%, 100% {
        text-shadow:
          0 0 4px #ff003c,
          0 0 11px #ff003c,
          0 0 19px #ff003c,
          0 0 40px #ff003c,
          0 0 80px #ff003c;
      }
      20%, 24%, 55% {
        text-shadow: none;
      }
    }
  `}),e.jsxs("div",{style:r,children:[e.jsx("h1",{style:o,children:n}),e.jsx("p",{style:c,children:"PRESS [SPACE] TO RESTART"})]})]})},Ue=()=>{const s=d(Z),t=p.useMemo(()=>{const r=[],o="#00ffff";for(let i=0;i<=I;i++){const a=i*w-$/2;r.push(e.jsxs("mesh",{position:[0,a,L/2+.01],children:[e.jsx("planeGeometry",{args:[L,.03]}),e.jsx("meshBasicMaterial",{color:o,transparent:!0,opacity:.3})]},`h-${i}`))}for(let i=0;i<=P;i++){const a=i*w-L/2;r.push(e.jsxs("mesh",{position:[a,0,L/2+.01],children:[e.jsx("planeGeometry",{args:[.03,$]}),e.jsx("meshBasicMaterial",{color:o,transparent:!0,opacity:.3})]},`v-${i}`))}return r},[]),n=d(b);return e.jsxs("group",{children:[e.jsxs(Y,{args:[L,$,L],children:[e.jsx("meshBasicMaterial",{transparent:!0,opacity:s?.9:.05,color:s?"#000000":"#00ffff",side:De}),e.jsx(Q,{threshold:15,color:"#00ffff"})]}),e.jsx("group",{rotation:[0,n*(Math.PI/2),0],children:t})]})},Se=({position:s,color:t,opacity:n=1})=>e.jsxs(Y,{args:[w,w,w],position:s,children:[e.jsx("meshStandardMaterial",{color:t,emissive:t,emissiveIntensity:.3,toneMapped:!1,transparent:n<1,opacity:n}),e.jsx(Q,{threshold:15,color:t})]}),$e=({position:s})=>{const t=p.useRef(null),n="#ff0000";return fe(({clock:r})=>{const o=(Math.sin(r.elapsedTime*10)+1)/2;t.current.emissiveIntensity=2+o*8}),e.jsxs(Y,{args:[w,w,w],position:s,children:[e.jsx("meshStandardMaterial",{ref:t,color:n,emissive:n,toneMapped:!1}),e.jsx(Q,{threshold:15,color:n})]})},Ve=({position:s})=>e.jsxs(Y,{args:[w,w,w],position:s,children:[e.jsx("meshBasicMaterial",{color:"white",transparent:!0,opacity:.2,toneMapped:!1}),e.jsx(Q,{color:"white"})]}),Xe=({grid:s,faceIndex:t,isFocusMode:n,activeFace:r})=>{const o=p.useRef(null);p.useEffect(()=>{const i=t*(Math.PI/2);o.current.rotation.y=i},[t]);const c=n&&t!==r?.05:1;return e.jsx("group",{ref:o,children:s.map((i,a)=>i.map((l,m)=>{if(l!==0){const y=new re(m*w-L/2+w/2,(I-a)*w-$/2-w/2,L/2),g=B[l].color;return e.jsx(Se,{position:y,color:g,opacity:c},`${a}-${m}`)}return null}))})},Ye=24,Qe=()=>{const s=d(H),t=d(b),n=d(T),r=d(X),o=d(Z),c=d(N),i=d(se),a=p.useRef(null),l=new Ne,m=p.useRef(0);p.useEffect(()=>{c&&(m.current=performance.now())},[c]),fe(u=>{const x=t*(Math.PI/2),v=new Oe(0,x,0);l.setFromEuler(v),u.camera.quaternion.slerp(l,.1);const j=new re(0,0,Ye).applyQuaternion(u.camera.quaternion);if(c){const S=performance.now()-m.current,E=Math.max(0,1-S/800),h=.2*E*E;j.x+=(Math.random()-.5)*h,j.y+=(Math.random()-.5)*h}u.camera.position.lerp(j,.5),u.camera.lookAt(0,0,0),a.current&&a.current.quaternion.slerp(l,.2)});const y=p.useMemo(()=>{if(!n||!r)return null;const u=s[t];let x=n.position.y;const v=new _(n.type);for(v.shape=n.shape;z(u,v,{x:n.position.x,y:x+1});)x++;return v.position={x:n.position.x,y:x},v},[n,t,s,r]),g=(u,x=!1,v=!1)=>u.shape.map((j,S)=>j.map((E,h)=>{if(E!==0){const M=new re((u.position.x+h)*w-L/2+w/2,(I-(u.position.y+S))*w-$/2-w/2,L/2);return v?e.jsx($e,{position:M},`${S}-${h}`):x?e.jsx(Ve,{position:M},`${S}-${h}`):e.jsx(Se,{position:M,color:u.color},`${S}-${h}`)}return null}));return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.6}),e.jsx("pointLight",{position:[10,10,20],intensity:1}),e.jsxs("group",{children:[s.map((u,x)=>e.jsx(Xe,{grid:u,faceIndex:x,isFocusMode:o,activeFace:t},x)),e.jsxs("group",{ref:a,children:[!c&&n&&g(n),c&&i&&g(i,!1,!0),!c&&y&&g(y,!0)]})]}),e.jsxs(Ie,{children:[e.jsx(Ce,{luminanceThreshold:.3,luminanceSmoothing:.9,height:300}),e.jsx(Ge,{premultiply:!0,opacity:c?.25:0}),e.jsx(Be,{eskil:!1,offset:c?.2:.5,darkness:c?1.2:.5})]})]})},Ze=()=>{const s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#00ffff",fontSize:"5rem",fontFamily:"'Cutive Mono', 'Courier New', monospace",textShadow:"0 0 15px #00ffff, 0 0 25px #00ffff",zIndex:200,pointerEvents:"none",animation:"levelUp-fade-out 0.5s forwards"};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes levelUp-fade-out {
            from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            to { opacity: 0; transform: translate(-50%, -80%) scale(1.2); }
        }
    `}),e.jsx("div",{style:s,children:"LEVEL UP"})]})},Je=()=>{const s=d(A),t=d(R),{handleTouchStart:n,handleTouchEnd:r}=Ke(),o=p.useRef(null);p.useEffect(()=>{const l=o.current;if(l)return l.addEventListener("touchstart",n,{passive:!1}),l.addEventListener("touchend",r,{passive:!1}),()=>{l.removeEventListener("touchstart",n),l.removeEventListener("touchend",r)}},[n,r]);const[c,i]=p.useState(!1),a=p.useRef(t);return p.useEffect(()=>{if(t>a.current){i(!0);const l=setTimeout(()=>i(!1),500);return a.current=t,()=>clearTimeout(l)}else t<a.current&&(a.current=t)},[t]),e.jsxs("div",{style:{position:"relative",height:"100%",width:"100%",touchAction:"none !important",userSelect:"none",WebkitTouchCallout:"none"},ref:o,children:[s&&e.jsx(We,{}),c&&e.jsx(Ze,{}),e.jsxs(ue,{style:{height:"100%",width:"100%",background:"#050505"},camera:{fov:60,position:[0,0,24]},children:[e.jsx(Qe,{}),e.jsx(Ue,{})]})]})},qe=160,et=50,tt=()=>{const s=k(ie),t=k(xe),n=k(je),r=k(we),o=k(ye),c=k(ge),i=k(ve),a=k(ke),l=d(A),m=d(O),y=d(te),g=d(b),u=d(R),x=d(D),v=d(me),j=p.useRef({});return p.useEffect(()=>{s()},[s]),p.useEffect(()=>{if(l||m||!y.includes(g))return;let E=(M=>Math.max(60,500-(M-1)*70))(u);v&&(E=50);const h=setInterval(()=>{t({dx:0,dy:1})},E);return()=>clearInterval(h)},[l,m,y,g,u,t,v]),p.useEffect(()=>{if(x){const S=setTimeout(()=>{c()},100);return()=>clearTimeout(S)}},[x,c]),p.useEffect(()=>{const S=h=>{if(m||h.repeat||l&&h.code!=="Space"||!y.includes(g)&&!["KeyQ","KeyE","KeyF","KeyG"].includes(h.code))return;const M=G=>{switch(G){case"ArrowLeft":t({dx:-1,dy:0});break;case"ArrowRight":t({dx:1,dy:0});break;case"ArrowDown":t({dx:0,dy:1});break}};switch(h.code){case"ArrowLeft":case"ArrowRight":case"ArrowDown":M(h.code);const G=window.setTimeout(()=>{if(!j.current[h.code])return;M(h.code);const ce=window.setInterval(()=>{M(h.code)},et);j.current[h.code].arr=ce},qe);j.current[h.code]={das:G};break;case"ArrowUp":n();break;case"Space":l?s():o();break;case"KeyQ":r("left");break;case"KeyE":r("right");break;case"KeyG":i();break;case"KeyF":a();break}},E=h=>{["ArrowLeft","ArrowRight","ArrowDown"].includes(h.code)&&j.current[h.code]&&(j.current[h.code].das&&window.clearTimeout(j.current[h.code].das),j.current[h.code].arr&&window.clearInterval(j.current[h.code].arr),delete j.current[h.code])};return window.addEventListener("keydown",S),window.addEventListener("keyup",E),()=>{window.removeEventListener("keydown",S),window.removeEventListener("keyup",E),Object.keys(j.current).forEach(h=>{var M,G;(M=j.current[h])!=null&&M.das&&window.clearTimeout(j.current[h].das),(G=j.current[h])!=null&&G.arr&&window.clearInterval(j.current[h].arr)})}},[l,y,g,t,n,r,o,i,a,s]),null};function W(){const[s,t]=p.useState({width:window.innerWidth,height:window.innerHeight});return p.useEffect(()=>{function n(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),s}const st=()=>{const{width:s}=W(),t=d(K),n=k(we),r=p.useRef(0),o=s>=1024;if(!t||o)return null;const c=(i,a)=>{i.preventDefault(),i.stopPropagation();const l=Date.now();l-r.current<300||(r.current=l,n(a))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"face-shift-button left",onTouchStart:i=>c(i,"left"),onClick:i=>c(i,"left"),children:"<"}),e.jsx("div",{className:"face-shift-button right",onTouchStart:i=>c(i,"right"),onClick:i=>c(i,"right"),children:">"})]})},nt=()=>{const[s,t]=p.useState([window.innerWidth,window.innerHeight]);return p.useEffect(()=>{const n=()=>{t([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),s},Te=()=>{const[s]=nt(),t=s<768,n=e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("span",{children:"Q/E"})," : Rotate Face"]}),e.jsxs("li",{children:[e.jsx("span",{children:"â†â†‘â†’â†“"})," : Move/Rotate"]}),e.jsxs("li",{children:[e.jsx("span",{children:"Space"})," : Drop"]}),e.jsxs("li",{children:[e.jsx("span",{children:"G"})," : Ghost Toggle"]}),e.jsxs("li",{children:[e.jsx("span",{children:"F"})," : Focus Mode"]})]}),r=e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("span",{children:"ðŸ”„"})," : Rotate Face"]}),e.jsxs("li",{children:[e.jsx("span",{children:"ðŸ‘»"})," : Ghost Toggle"]}),e.jsxs("li",{children:[e.jsx("span",{children:"Tap"})," : Rotate"]}),e.jsxs("li",{children:[e.jsx("span",{children:"Swipe"})," : Move"]}),e.jsxs("li",{children:[e.jsx("span",{children:"Swipe Down"})," : Drop"]})]});return e.jsxs("div",{className:"key-hints",children:[e.jsx("h3",{children:t?"Controls":"Key Hints"}),t?r:n,e.jsx("style",{children:`
        .key-hints {
          position: absolute;
          bottom: 20px;
          left: 20px;
          z-index: 100;
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          padding: 15px;
          border-radius: 10px;
          font-family: 'Cutive Mono', 'Courier New', monospace;
          font-size: 16px;
          border: 1px solid #00ffff;
          text-shadow: 0 0 5px #00ffff;
        }
        .key-hints h3 {
          margin-top: 0;
          color: #00ffff;
          text-align: center;
          margin-bottom: 10px;
        }
        .key-hints ul {
          list-style: none;
          padding: 0;
          margin: 0;
        }
        .key-hints li {
          margin-bottom: 8px;
          display: flex;
          align-items: center;
        }
        .key-hints span {
          display: inline-block;
          width: 85px;
          font-weight: bold;
          color: #00ffff;
          text-align: center;
        }

        @media (max-width: 768px) {
          .key-hints {
            font-size: 14px;
            padding: 10px;
          }
          .key-hints span {
            width: 40px;
          }
        }
      `})]})},Ee=()=>{var a;const s=d(V);if(!s)return null;const t={width:"100%",height:"120px",background:"rgba(0,0,0,0.25)",borderRadius:"5px",marginTop:"10px"},n=s.shape,r=((a=n[0])==null?void 0:a.length)??0,o=n.length,c=(4-r)/2,i=(4-o)/2;return e.jsxs("div",{children:[e.jsx("p",{style:{marginBottom:"5px"},children:"Next:"}),e.jsx("div",{style:t,children:e.jsxs(ue,{camera:{fov:30,position:[0,0,10]},children:[e.jsx("ambientLight",{intensity:.8}),e.jsx("pointLight",{position:[10,10,10],intensity:.5}),e.jsx("group",{scale:[.8,.8,.8],children:n.map((l,m)=>l.map((y,g)=>y!==0?e.jsxs(Y,{args:[1,1,1],position:[g+c-1.5,-(m+i)+1.5,0],children:[e.jsx("meshStandardMaterial",{color:B[s.type].color,emissive:B[s.type].color,emissiveIntensity:.4,toneMapped:!1}),e.jsx(Q,{color:B[s.type].color})]},`${m}-${g}`):null))})]})})]})},ot=()=>{const{width:s}=W(),t=d(K),n=d(ae),r=k(ae),o=d(C),c=d(R),i=d(b),a=y=>{y.preventDefault(),r(!0)},l=y=>{y.preventDefault(),r(!1)},m=s>=1024;return!t||m?null:e.jsxs("div",{className:"mobile-hud",children:[e.jsx("button",{className:"hud-toggle-button",onTouchStart:a,onTouchEnd:l,onMouseDown:a,onMouseUp:l,children:"i"}),n&&e.jsxs("div",{className:"hud-content",children:[e.jsxs("p",{children:["Score: ",o]}),e.jsxs("p",{children:["Level: ",c]}),e.jsxs("p",{children:["Face: ",i]}),e.jsx(Ee,{}),e.jsx("div",{className:"desktop-only-hints",style:{marginTop:"15px"},children:e.jsx(Te,{})})]})]})},rt=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 0 5px #00ffff)"},children:[e.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#00ffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.4 15L21.4 12L19.4 9M4.6 9L2.6 12L4.6 15M15 19.4L12 21.4L9 19.4M9 4.6L12 2.6L15 4.6M17.8 17.8L19.2 19.2M6.2 6.2L4.8 4.8M6.2 17.8L4.8 19.2M17.8 6.2L19.2 4.8",stroke:"#00ffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),he=({label:s,isChecked:t,onToggle:n})=>e.jsxs("div",{className:"setting-row",children:[e.jsx("label",{htmlFor:s,children:s}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{id:s,type:"checkbox",checked:t,onChange:n}),e.jsx("span",{className:"slider"})]})]}),it=()=>{const{width:s}=W(),[t,n]=p.useState(!1),r=d(Z),o=d(X),c=k(ke),i=k(ve);return s>=1024?null:e.jsxs("div",{className:"settings-hud",children:[e.jsx("button",{className:"settings-button",onClick:()=>n(a=>!a),children:e.jsx(rt,{})}),t&&e.jsxs("div",{className:"settings-menu",children:[e.jsx(he,{label:"Focus Mode",isChecked:r,onToggle:c}),e.jsx(he,{label:"Ghost Mode",isChecked:o,onToggle:i})]})]})},ct=({onClose:s})=>{const{width:t}=W(),n=t<1024;return e.jsx("div",{className:"instruction-overlay",onClick:s,children:e.jsxs("div",{className:"instruction-content",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{className:"close-button",onClick:s,children:"X"}),e.jsx("h1",{children:"How to Play"}),e.jsxs("div",{className:"instructions",children:[e.jsx("p",{children:"Clear lines across all 4 faces of the cube to get the highest score. The game gets faster over time. Survive as long as you can!"}),n?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Controls"}),e.jsxs("div",{className:"control-group",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Swipe Left/Right:"})," Move the block."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Swipe Down:"})," Drop the block."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tap:"})," Rotate the block."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Long Press:"})," Fast drop."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tap Edges:"})," Rotate the entire cube face."]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Controls"}),e.jsxs("div",{className:"control-group",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Arrow Keys (â† â†’ â†“):"})," Move the block."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Arrow Key (â†‘):"})," Rotate the block."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Space Bar:"})," Hard drop the block."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Q / E:"})," Rotate the entire cube face."]})]})]})]})]})})},be=()=>{const{width:s}=W();return s<768},at=()=>{const s=k(ie),t=k(K),n=be(),[r,o]=p.useState(!1),c=()=>{t(!0),s()},i=a=>{a.stopPropagation(),o(!r)};return p.useEffect(()=>{const a=l=>{l.code==="Space"&&!r&&(l.preventDefault(),c())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[r]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",color:"white",zIndex:99,cursor:"pointer",fontFamily:"'Orbitron', sans-serif"},onClick:c,children:[e.jsx("h1",{style:{fontSize:"3rem",textShadow:"0 0 10px #0ff"},children:"3D TETRIS"}),e.jsx("p",{style:{fontSize:"1.5rem",marginTop:"1rem"},children:n?"TOUCH SCREEN TO RESTART":"PRESS SPACE TO RESTART"})]}),e.jsx("div",{style:{position:"absolute",top:"2rem",right:"2rem",zIndex:101,cursor:"pointer",fontSize:"2rem",color:"#fff",textShadow:"0 0 5px #0ff"},onClick:i,onTouchStart:i,children:"?"}),r&&e.jsx(ct,{onClose:()=>o(!1)})]})},lt=()=>{const{width:s}=W(),t=d(K),n=d(C),r=d(R),o=d(b);return!(s>=1024)||!t?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"desktop-dashboard left",children:e.jsxs("div",{className:"dashboard-panel",children:[e.jsx("h2",{children:"Stats"}),e.jsxs("p",{children:["Score: ",n]}),e.jsxs("p",{children:["Level: ",r]}),e.jsxs("p",{children:["Face: ",o]})]})}),e.jsxs("div",{className:"desktop-dashboard right",children:[e.jsxs("div",{className:"dashboard-panel",children:[e.jsx("h2",{children:"Next"}),e.jsx(Ee,{})]}),e.jsx(Te,{})]})]})},dt=({onRestart:s})=>{const t=be(),n=()=>{s()};return e.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",color:"white",zIndex:99,cursor:"pointer",fontFamily:"'Orbitron', sans-serif"},onClick:n,children:[e.jsx("h1",{style:{fontSize:"3rem",textShadow:"0 0 10px #f00"},children:"GAME OVER"}),e.jsx("p",{style:{fontSize:"1.5rem",marginTop:"1rem"},children:t?"TOUCH SCREEN TO RESTART":"PRESS SPACE TO RESTART"})]})},ht=()=>{const s=d(K),t=d(A),n=k(ie),r=()=>{n()};return p.useEffect(()=>{},[s,t]),e.jsx("div",{style:{background:"#222",width:"100vw",height:"100dvh",overflow:"hidden"},children:s?t?e.jsx(dt,{onRestart:r}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{}),e.jsx(ot,{}),e.jsx(st,{}),e.jsx(it,{}),e.jsx(lt,{}),e.jsx(Je,{})]}):e.jsx(at,{})})};Le.createRoot(document.getElementById("root")).render(e.jsx(Re.StrictMode,{children:e.jsx(Fe,{children:e.jsx(ht,{})})}));
